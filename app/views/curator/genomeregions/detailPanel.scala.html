@import models.api.genomics.GenomeRegionDetailDto
@(region: GenomeRegionDetailDto)(implicit request: RequestHeader)

<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h6 class="mb-0">Region Details</h6>
        <div>
            <a href="@controllers.routes.GenomeRegionsCuratorController.editRegionForm(region.id)"
               class="btn btn-sm btn-outline-primary me-1">
                <i class="bi bi-pencil"></i> Edit
            </a>
            <button class="btn btn-sm btn-outline-danger"
                    hx-delete="@controllers.routes.GenomeRegionsCuratorController.deleteRegion(region.id)"
                    hx-confirm="Are you sure you want to delete this genome region?"
                    hx-target="#detail-panel">
                <i class="bi bi-trash"></i> Delete
            </button>
        </div>
    </div>
    <div class="card-body">
        <dl class="row mb-0">
            <dt class="col-sm-4">ID</dt>
            <dd class="col-sm-8">@region.id</dd>

            <dt class="col-sm-4">Type</dt>
            <dd class="col-sm-8">
                <span class="badge bg-secondary">@region.regionType</span>
            </dd>

            @region.name.map { name =>
                <dt class="col-sm-4">Name</dt>
                <dd class="col-sm-8">@name</dd>
            }

            @if(region.coordinates.nonEmpty) {
                <dt class="col-12 mt-2 mb-1">Coordinates</dt>
                @for((build, coord) <- region.coordinates) {
                    <dt class="col-sm-4 text-muted fw-normal ps-4">@build</dt>
                    <dd class="col-sm-8">
                        <strong>@coord.contig</strong>:
                        <code>@{java.text.NumberFormat.getIntegerInstance().format(coord.start)}</code> - 
                        <code>@{java.text.NumberFormat.getIntegerInstance().format(coord.end)}</code>
                        <small class="text-muted">(@{java.text.NumberFormat.getIntegerInstance().format(coord.end - coord.start)} bp)</small>
                    </dd>
                }
            } else {
                 <dt class="col-sm-4">Coordinates</dt>
                 <dd class="col-sm-8 text-muted">No coordinates defined</dd>
            }

            @if((region.properties \ "modifier").asOpt[BigDecimal].isDefined) {
                <dt class="col-sm-4">Modifier</dt>
                <dd class="col-sm-8">@{(region.properties \ "modifier").as[BigDecimal]}</dd>
            }
            
            @if((region.properties \ "stain").asOpt[String].isDefined) {
                <dt class="col-sm-4">Stain</dt>
                <dd class="col-sm-8">@{(region.properties \ "stain").as[String]}</dd>
            }
        </dl>
    </div>
</div>