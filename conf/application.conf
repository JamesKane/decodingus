# https://www.playframework.com/documentation/latest/Configuration

play.http.secret.key="changeme"
play.http.secret.key=${?APPLICATION_SECRET}

play.i18n {
  langs = [ "en", "fr", "es" ]
}

# No need to create cookies in a read-only application.  Remove when appropriate
play.http.session.disabled=true

# Disable the startup banner
play.application.showBanner=false

play.modules.enabled += "modules.BaseModule"
play.modules.enabled += "modules.ServicesModule"

play.modules.enabled += "modules.RecaptchaModule"
play.modules.enabled += "modules.StartupModule"
play.modules.enabled += "modules.ApplicationModule"
play.modules.enabled += "modules.ApiSecurityModule"
play.modules.enabled += "modules.PDSRegistrationModule"

play.cache.caffeine {
  # Default cache configuration
  default = {
    initial-capacity = 100
    maximum-size = 10000
    expire-after-write = 24h
  }
  # Specific cache configurations if needed
  sitemap = ${play.cache.caffeine.default}
}

# Tell Play to use Caffeine instead of the default EhCache
play.cache.createBoundCaches = false
play.modules.enabled += "play.api.cache.caffeine.CaffeineCacheModule"

recaptcha {
  enable = false
  enable = ${?ENABLE_RECAPTCHA}

  # Your existing recaptcha configuration here
  privateKey = "your-secret-key"
  privateKey = ${?RECAPTCHA_SECRET_KEY}
  publicKey = "your-site-key"
  publicKey = ${?RECAPTCHA_SITE_KEY}
}

# Apply evolutions automatically, disable in the production version
play.evolutions.autocommit=true

slick.dbs.default {
    profile="slick.jdbc.PostgresProfile$"
    db {
        numThreads = 32
        queueSize = 5000

        driver="org.postgresql.Driver"
        url="jdbc:postgresql://localhost:5432/decodingus_db"
        # Local Development Credentials
        username="decoding_us_user"
        # Overridden in production on startup
            password="user_password"
        }
}

slick.dbs.metadata {
    profile="slick.jdbc.PostgresProfile$"
    db {
        numThreads = 32
        queueSize = 5000

        driver="org.postgresql.Driver"
        url="jdbc:postgresql://localhost:5432/decodingus_metadata" # Temporarily pointing to the same DB
        username="decodingus_user"
        password="decodingus_password"
    }
}

contact {
  recipient.email = "your-email@domain.com"
  recipient.email = ${?CONTACT_RECIPIENT_EMAIL}  # Can be overridden by environment variable
}

pekko {
  loglevel = "DEBUG"
  stdout-loglevel = "DEBUG"
  jvm-exit-on-fatal-error = off

  quartz.schedules {
    # Publication Updater: Run every two weeks
    PublicationUpdater {
      # CRON expression for every two weeks at midnight UTC
      # This will trigger at 00:00:00 UTC on the 1st and 15th of every month.
      expression = "0 0 0 1,15 * ?"
      timezone = "UTC"
      description = "Refresh publication data from OpenAlex every two weeks"
    }

    PublicationDiscovery {
      # Run weekly on Sunday at 2 AM UTC
      expression = "0 0 2 ? * SUN"
      timezone = "UTC"
      description = "Discover new publications via OpenAlex"
    }
  }
}

openalex.mailToEmail="jkane@tds.net"

aws {
  region = "us-east-1"
  secrets {
    apiKey {
      name = "your-secret-name"
    }
    userEncryptionKey {
      name = "your-user-encryption-key-secret-name"
    }
  }
}

biosample.hash.salt = "your-biosample-salt"
biosample.hash.salt = ${?BIOSAMPLE_HASH_SALT}

genomics {
  references {
    # Canonical names for supported linear reference builds
    supported = ["GRCh37", "GRCh38", "hs1"]
    
    # Aliases to map common names to canonical names
    aliases {
      "hg19" = "GRCh37"
      "hg38" = "GRCh38"
      "chm13" = "hs1"
      "chm13v2.0" = "hs1"
    }

    # Paths to reference genome FASTA files
    fasta_paths {
      "GRCh37" = "conf/fasta/GRCh37.fa"
      "GRCh38" = "conf/fasta/GRCh38.fa"
      "hs1"    = "conf/fasta/hs1.fa"
    }
  }

  liftover {
    # Chain files for coordinate conversion
    # Format: "Source->Target" = "path/to/chain/file"
    chains {
      "GRCh38->GRCh37" = "conf/liftover/hg38ToHg19.over.chain.gz"
      "GRCh38->hs1"    = "conf/liftover/hg38ToHs1.over.chain.gz"
    }
  }
}


