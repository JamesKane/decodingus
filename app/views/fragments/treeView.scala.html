@(titleKey: String,
  fragmentCall: Option[String] => play.api.mvc.Call,
  fullPageCall: Option[String] => play.api.mvc.Call,
  rootHaplogroup: Option[String],
  searchPlaceholder: String,
  searchInputTitle: String,
  showVerticalTree: Boolean = false)(implicit webJarsUtil: org.webjars.play.WebJarsUtil, messages: Messages, request: RequestHeader)

@main(messages(titleKey)) {
    <main class="container-fluid">
        <h1>@messages(titleKey)</h1>
        
        <div class="tree-controls d-flex justify-content-between align-items-center mb-3">
            <form class="search-form" hx-get="@fragmentCall(None)" hx-target="#tree-container" hx-push-url="@fullPageCall(None)">
                <label for="haplogroup-search">@messages("tree.jumpTo")</label>
                <input type="text"
                id="haplogroup-search"
                name="rootHaplogroup"
                placeholder="@searchPlaceholder"
                title="@searchInputTitle">
                <button type="submit">@messages("tree.go")</button>
            </form>

            <div class="form-check form-switch ms-3">
                <input class="form-check-input" type="checkbox" id="verticalTreeToggle" @if(showVerticalTree){checked} onchange="toggleVerticalTree(this)">
                <label class="form-check-label" for="verticalTreeToggle">@messages("tree.verticalCladogram")</label>
            </div>
        </div>

        <script>
            function toggleVerticalTree(checkbox) {
                document.cookie = "showVerticalTree=" + checkbox.checked + "; path=/; max-age=31536000";
                location.reload();
            }
        </script>

        <div id="tree-container"
        hx-get="@fragmentCall(rootHaplogroup)"
        hx-trigger="load">
            <div class="loading">@messages("tree.loading")</div>
        </div>
    </main>
}
