@import models.api.genomics.CytobandDetailDto
@(cytoband: CytobandDetailDto)(implicit request: RequestHeader)

<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h6 class="mb-0">Cytoband Details</h6>
        <div>
            <a href="@controllers.routes.GenomeRegionsCuratorController.editCytobandForm(cytoband.id)"
               class="btn btn-sm btn-outline-primary me-1">
                <i class="bi bi-pencil"></i> Edit
            </a>
            <button class="btn btn-sm btn-outline-danger"
                    hx-delete="@controllers.routes.GenomeRegionsCuratorController.deleteCytoband(cytoband.id)"
                    hx-confirm="Are you sure you want to delete this cytoband?"
                    hx-target="#detail-panel">
                <i class="bi bi-trash"></i> Delete
            </button>
        </div>
    </div>
    <div class="card-body">
        <dl class="row mb-0">
            <dt class="col-sm-4">ID</dt>
            <dd class="col-sm-8">@cytoband.id</dd>

            <dt class="col-sm-4">Chromosome</dt>
            <dd class="col-sm-8">
                <strong>@cytoband.contigName.getOrElse("Unknown")</strong>
            </dd>

            <dt class="col-sm-4">Build</dt>
            <dd class="col-sm-8">
                <span class="badge @buildBadgeClass(cytoband.referenceGenome.getOrElse(""))">
                    @cytoband.referenceGenome.getOrElse("Unknown")
                </span>
            </dd>

            <dt class="col-sm-4">Band Name</dt>
            <dd class="col-sm-8">
                <code>@cytoband.name</code>
            </dd>

            <dt class="col-sm-4">Start Position</dt>
            <dd class="col-sm-8">
                <code>@{java.text.NumberFormat.getIntegerInstance().format(cytoband.startPos)}</code>
            </dd>

            <dt class="col-sm-4">End Position</dt>
            <dd class="col-sm-8">
                <code>@{java.text.NumberFormat.getIntegerInstance().format(cytoband.endPos)}</code>
            </dd>

            <dt class="col-sm-4">Length</dt>
            <dd class="col-sm-8">
                <code>@{java.text.NumberFormat.getIntegerInstance().format(cytoband.endPos - cytoband.startPos)}</code> bp
            </dd>

            <dt class="col-sm-4">Stain</dt>
            <dd class="col-sm-8">
                <span class="badge @stainBadgeClass(cytoband.stain)">@cytoband.stain</span>
            </dd>
        </dl>
    </div>
</div>

@buildBadgeClass(refGenome: String) = @{
    refGenome match {
        case "GRCh37" => "bg-warning text-dark"
        case "GRCh38" => "bg-info"
        case "hs1" => "bg-success"
        case _ => "bg-secondary"
    }
}

@stainBadgeClass(stain: String) = @{
    stain match {
        case "gneg" => "bg-light text-dark"
        case "gpos25" => "bg-secondary"
        case "gpos50" => "bg-secondary"
        case "gpos75" => "bg-dark"
        case "gpos100" => "bg-dark"
        case "acen" => "bg-danger"
        case "gvar" => "bg-info"
        case "stalk" => "bg-primary"
        case _ => "bg-secondary"
    }
}
